<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            position: relative;
            display: inline-block;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        svg {
            position: absolute;
            top: 0;
            left: 0;
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            margin: 0 10px;
            padding: 8px 16px;
        }

        .overlay {
            pointer-events: all;
        }

        .body-base {
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="controls">
        <button onclick="toggleDrawing()">Toggle Drawing Mode</button>
        <button onclick="clearOverlays()">Clear Overlays</button>
        <span id="mode-indicator" style="margin-left: 10px;"></span>
    </div>
    
    <div class="container">
        <svg width="300" height="500" viewBox="0 0 300 500">
            <!-- Base body outline -->
            <g class="body-base" fill="#f0f0f0" stroke="black" stroke-width="2">
                <!-- Head -->
                <circle cx="150" cy="60" r="40" />
                
                <!-- Neck -->
                <rect x="135" y="100" width="30" height="20" />
                
                <!-- Torso -->
                <path d="M110,120 L190,120 L200,300 L100,300 Z" />
                
                <!-- Arms -->
                <path d="M190,120 L240,200 L230,210 L180,140 Z" /> <!-- Right arm -->
                <path d="M110,120 L60,200 L70,210 L120,140 Z" /> <!-- Left arm -->
                
                <!-- Legs -->
                <path d="M100,300 L80,450 L120,450 L140,300 Z" /> <!-- Left leg -->
                <path d="M200,300 L220,450 L180,450 L160,300 Z" /> <!-- Right leg -->
                
                <!-- Labels -->
                <g fill="black" font-size="12" text-anchor="middle">
                    <text x="150" y="65">Head</text>
                    <text x="150" y="200">Torso</text>
                    <text x="220" y="180">Arm</text>
                    <text x="80" y="180">Arm</text>
                    <text x="100" y="400">Leg</text>
                    <text x="200" y="400">Leg</text>
                </g>
            </g>
            
            <!-- Overlay group for ellipses -->
            <g class="overlay"></g>
        </svg>
    </div>

    <script>
        const svg = document.querySelector('svg');
        const overlay = document.querySelector('.overlay');
        const modeIndicator = document.getElementById('mode-indicator');
        let isDrawingEnabled = false;
        let isDrawing = false;
        let currentEllipse = null;
        let startX, startY;

        function toggleDrawing() {
            isDrawingEnabled = !isDrawingEnabled;
            modeIndicator.textContent = isDrawingEnabled ? "Drawing Mode: ON" : "Drawing Mode: OFF";
        }

        function clearOverlays() {
            while (overlay.firstChild) {
                overlay.removeChild(overlay.firstChild);
            }
        }

        function createEllipse(x, y) {
            const ellipse = document.createElementNS("http://www.w3.org/2000/svg", 'ellipse');
            ellipse.setAttribute('fill', 'rgba(255, 0, 0, 0.2)');
            ellipse.setAttribute('stroke', 'red');
            ellipse.setAttribute('stroke-width', '2');
            return ellipse;
        }

        svg.addEventListener('mousedown', (e) => {
            if (!isDrawingEnabled) return;
            
            isDrawing = true;
            const rect = svg.getBoundingClientRect();
            startX = e.clientX - rect.left;
            startY = e.clientY - rect.top;
            
            currentEllipse = createEllipse();
            overlay.appendChild(currentEllipse);
        });

        svg.addEventListener('mousemove', (e) => {
            if (!isDrawing) return;
            
            const rect = svg.getBoundingClientRect();
            const currentX = e.clientX - rect.left;
            const currentY = e.clientY - rect.top;
            
            const cx = (startX + currentX) / 2;
            const cy = (startY + currentY) / 2;
            const rx = Math.abs(currentX - startX) / 2;
            const ry = Math.abs(currentY - startY) / 2;
            
            currentEllipse.setAttribute('cx', cx);
            currentEllipse.setAttribute('cy', cy);
            currentEllipse.setAttribute('rx', rx);
            currentEllipse.setAttribute('ry', ry);
        });

        svg.addEventListener('mouseup', () => {
            isDrawing = false;
            currentEllipse = null;
        });

        // Initialize mode indicator
        modeIndicator.textContent = "Drawing Mode: OFF";
    </script>
</body>
</html>
